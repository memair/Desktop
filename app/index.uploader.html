<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Memair</title>
	<style>
		#drag-zip {
			background-color: #00a0dc;
            color:white;
			text-align: center;
            width:400px;
            height:400px;
            margin:0 auto;
		}
	</style>
    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
</head>

<body>
	<div id="drag-zip">
		<p>Drag your zipped Facebook, Google, or Twitter data archives here to start exploring</p>
	</div>

    <script>
        var sqlite3 = require('sqlite3');
        var db = new sqlite3.Database('memair.db');
    </script>
	<script>
        var AdmZip = require('adm-zip');
        var zipFile;
        var zipEntries;

        (function () {
            var holder = document.getElementById('drag-zip');

            holder.ondragover = holder.ondragleave = holder.ondragend = () => {
                return false;
            };

            holder.ondrop = (e) => {
                e.preventDefault();

                var firstFile = e.dataTransfer.files[0];

                if(!firstFile){
                    console.log("No file given");
                    return;
                }

                zipFile = new AdmZip(firstFile.path)
                zipEntries = zipFile.getEntries();

                zipEntries.forEach(function(zipEntry) {
                    console.log(zipEntry.toString()); // outputs zip entries information
                    if (zipEntry.entryName == "my_file.txt") {
                         console.log(zipEntry.getData().toString('utf8'));
                    }
                });

                return false;
            };
        })();
    </script>

    <script src="renderer.js"></script>
</body>

</html>
